<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.panfeng.persist.DealLogMapper">

	<select id="findAll" resultType="DealLog">
		<![CDATA[
			SELECT * FROM DEAL_LOG
		]]>
	</select>

	<select id="findDealById" resultType="DealLog">
		<![CDATA[
			SELECT * FROM DEAL_LOG WHERE DL_ID = ${dealId}
		]]>
	</select>

	<select id="findDealByBillNo" resultType="DealLog">
		<![CDATA[
			SELECT * FROM DEAL_LOG WHERE DL_ID = #{billNo}
		]]>
	</select>

	<insert id="save" useGeneratedKeys="true" keyProperty="dealId"
		parameterType="DealLog">
		<![CDATA[
			INSERT INTO DEAL_LOG(
				DL_BILLNO,
				DL_PAY_CHANNEL,
				DL_STATE,
				DL_USER_TYPR,
				DL_USER_ID
			)
			VALUES(
				#{billNo},
				#{payChannel},
				${state},
				#{userType},
				${userId}
			)
		]]>
	</insert>

	<update id="update" parameterType="long">
		<![CDATA[
			UPDATE DEAL_LOG SET
		]]>
		<if test="billNo != null and billNo != '' ">
			DL_BILLNO = #{billNo},
		</if>
		<if test="payChannel != null and payChannel != '' ">
			DL_PAY_CHANNEL = #{payChannel},
		</if>
		<if test="payChannel != null and payChannel != '' ">
			DL_PAY_CHANNEL = #{payChannel},
		</if>
		<if test="userType != null and userType != '' ">
			DL_USER_TYPR = #{userType},
		</if>
		<if test="userId != null and userId != '' ">
			DL_USER_ID = #{userId}
		</if>
		<![CDATA[
			 WHERE DL_ID = ${dealId}
		]]>
	</update>

	<delete id="delete">
		<![CDATA[
			DELETE FROM DEAL_LOG
				WHERE DL_ID = ${dealId}
		]]>
	</delete>

</mapper>